<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>Safari 11 Gives Web Standards a Boost – Rob Porter</title> <meta name="description" content="Digital Naturalist"> <meta name="keywords" content="Javascript, ES6, Safari, iOS, mobile, Programming, browsers"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="http://localhost:4000//assets/img/armillery.png"> <meta name="twitter:title" content="Safari 11 Gives Web Standards a Boost"> <meta name="twitter:description" content="With the release of Safari 11, WebRTC and Stream API are real, implemented cross-platform standards"> <meta name="twitter:site" content="@rgeraldporter"> <meta name="twitter:creator" content="@rgeraldporter"> <!-- Open Graph --> <meta property="og:locale" content="en_CA"> <meta property="og:type" content="article"> <meta property="og:title" content="Safari 11 Gives Web Standards a Boost"> <meta property="og:description" content="With the release of Safari 11, WebRTC and Stream API are real, implemented cross-platform standards"> <meta property="og:url" content="http://localhost:4000/safari-11/"> <meta property="og:site_name" content="Rob Porter"> <meta property="og:image" content="http://localhost:4000/assets/img/feather-7.svg"> <link rel="canonical" href="http://localhost:4000/safari-11/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Rob Porter Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png"> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/sunset-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <style type="text/css">.feature {background-image:url(http://localhost:4000//assets/img/armillery.png);}</style> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <!--li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/feather-7.svg" alt="Rob Porter photo" class="author-photo"> <h4>Rob Porter</h4> <p>Digital Naturalist</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://linkedin.com/in/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://instagram.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-instagram"></i> Instagram</a> </li> <li> <a href="http://github.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://stackoverflow.com/users/325674/rob-porter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-stack-overflow"></i> StackOverflow</a> </li> </ul><!-- /.dl-submenu --> <!--/li--> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://localhost:4000/posts/">All Posts</a></li> <li><a href="http://localhost:4000/tags/">All Tags</a></li> </ul> </li> <li><a href="http://localhost:4000/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title feature "> <h1>Safari 11 Gives Web Standards a Boost</h1> <h4>06 Jun 2017</h4> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>On June 5, Apple announced their annual update to various products at the WWDC 2017 Conference during their <a href="https://www.apple.com/apple-events/june-2017/" target="_blank">keynote session</a>.</p> <p>While a lot gets presented at these keynotes each year, rarely do web-based technologies get much attention beyond performance benchmarks and user experience tweaks. Web developers generally need to hunt down the release notes, download the beta releases, and give the browsers a try themselves.</p> <p>The reason I say “browsers” and not “browser”, is <em>mobile</em> Safari and <em>desktop</em> Safari are slightly different in capabilities.</p> <p>Thankfully, for nearly a year now the WebKit team have been releasing regular “<a href="https://developer.apple.com/safari/technology-preview/" target="_blank">Safari Technology Preview</a>” builds that can be used to test forthcoming features for desktop Safari.</p> <p>For mobile Safari however, developers can only guess which features may or may not come out with the next iOS. There are no stand-alone mobile previews to download, and until a new iOS beta comes out we can’t know what features Apple plans on allowing into the next mobile browser version.</p> <p>Not everything that makes it to the desktop is added to the mobile version. One of the most notable features missing from mobile Safari is Web Notifications, of which the desktop version has enjoyed for years now.</p> <h3 id="whats-new-for-safari-11">What’s new for Safari 11</h3> <p>The <a href="https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Safari_11_0/Safari_11_0.html" target="_blank">official Safari 11 release notes</a> include the following that are of interest to me:</p> <ul> <li>WebRTC implementation for conferencing</li> <li>getUserMedia/Stream API - browser can now access video &amp; audio directly in real-time</li> <li>Web Assembly (this alone is huge!)</li> <li>updated WebKit support for home screen web apps</li> </ul> <p>Of those, the combination of WebRTC and Stream API finally give the web some more equal playing ground with native apps when it comes to working with the camera and microphone. Until Safari 11, the only way one could work with either of these was through file uploads – you could take a photo, record a video, but any processing of data in either media would have to be done after the recording was done.</p> <p>With these updates, real-time reactions to the content – such as making a QR code scanner, or streaming a voice message direct to a server as you talk are finally possible. This also opens up Augmented Reality (AR) possibilities as well, especially with the huge added processing firepower that comes with Web Assembly.</p> <h3 id="web-standards">Web Standards</h3> <p>None of these features would be very interesting for me if Safari wasn’t the last hold-out of these standards. With the release of Safari 11, WebRTC and Stream API are real, implemented cross-platform standards. (Web Assembly is really close, with Microsoft Edge browser as the last hold-out – and that won’t be for long as I’d expect to see it in Edge 16.)</p> <h3 id="playing-with-safari-110">Playing with Safari 11.0</h3> <p>I’ve played around a bit with Safari on the iOS 11 Beta, and there’s a few interesting finds I’ve had…</p> <ul> <li>The User-Agent String diverges from desktop <ul> <li>Strangely, while it does indicate iOS 11 in the string, it identifies as Safari 10.0. This might not be a mistake: iOS 10.1, 10.2, 10.3 all identified as using Safari 10.0 even though iOS 10.3 used Safari 10.1. This would be far from the first time a browser has decided to do <a href="https://www.nczonline.net/blog/2010/01/12/history-of-the-user-agent-string/" target="_blank">strange things in the user agent string</a>. Why would they do this? No ideas.</li> </ul> </li> <li>getUserMedia (Stream API) doesn’t entirely match the <a href="https://www.w3.org/TR/mediacapture-streams/#def-constraint-facingMode" target="_blank">W3C spec</a> <ul> <li>Stream API’s <code class="highlighter-rouge">facingMode</code> constraint does not use the standard <code class="highlighter-rouge">user</code> and <code class="highlighter-rouge">environment</code> keywords to refer to the front-facing and rear-facing camera as per the W3C recommendation. While <code class="highlighter-rouge">user</code> works for front-facing, <code class="highlighter-rouge">environment</code> also utilizes the front-facing camera – it shouldn’t, it should face the “environment”. To use the rear camera, the keyword <code class="highlighter-rouge">rear</code> must be used. (I’m not convinced <code class="highlighter-rouge">user</code> is actually accepted necessarily, but anything other than <code class="highlighter-rouge">rear</code> seems to fallback on front-facing – my bet is Safari prefers <code class="highlighter-rouge">front</code>.)</li> </ul> </li> <li>StreamAPI continutes to work in the background if you switch tabs <ul> <li>You can continue streaming audio &amp; video while browsing another tab in Safari, though you cannot leave Safari entirely while doing so. If you multi-task and open a second app alongside Safari, it seems to pause the streaming, though I’m not 100% sure of this</li> </ul> </li> <li>Home screen web apps attempt to resume when restored, but crash <ul> <li>In all previous iOS versions, “home screen” (fullscreen) web apps would restart anytime you switched away from them to another app. In iOS 11 this does not happen… but it does happen. Rather than immediately restarting the web app over again, it appears to briefly attempt to restore it, then crashes to the home screen. Then you have to launch it again. I hope web app sessions can be switched to, and that the crash is just a bug.</li> </ul> </li> </ul> <p>These are what I’ve found so far. I plan on following up with a proof-of-concept cross-platform QR scanner to demonstrate how Stream API can be used. I’ve done a few tests, and it is pretty quick. I would love to try and make it even faster with a compiled Web Assembly module, but that would probably take much more time.<img src="http://robporter.ca/assets/img/feather-7.svg" style="width:33px;height:33px;display:inline;padding-left:6px"></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#Javascript" title="Pages tagged Javascript" class="tag"><span class="term">Javascript</span></a><a href="http://localhost:4000/tags/#ES6" title="Pages tagged ES6" class="tag"><span class="term">ES6</span></a><a href="http://localhost:4000/tags/#Safari" title="Pages tagged Safari" class="tag"><span class="term">Safari</span></a><a href="http://localhost:4000/tags/#iOS" title="Pages tagged iOS" class="tag"><span class="term">iOS</span></a><a href="http://localhost:4000/tags/#mobile" title="Pages tagged mobile" class="tag"><span class="term">mobile</span></a><a href="http://localhost:4000/tags/#Programming" title="Pages tagged Programming" class="tag"><span class="term">Programming</span></a><a href="http://localhost:4000/tags/#browsers" title="Pages tagged browsers" class="tag"><span class="term">browsers</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/safari-11/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/safari-11/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/safari-11/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
