<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--><head>
<meta charset="UTF-8">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Introducing Inquiry: A process flow in Javascript – Rob Porter</title>
<meta name="description" content="Digital Naturalist">
<meta name="keywords" content="Javascript, functional programming, Node.js, InquiryJS">
<!-- Twitter Cards --><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://robporter.ca//assets/img/vinci.jpg">
<meta name="twitter:title" content="Introducing Inquiry: A process flow in Javascript">
<meta name="twitter:description" content="A Javascript process for testing data and aggregating results.">
<meta name="twitter:site" content="@rgeraldporter">
<meta name="twitter:creator" content="@rgeraldporter">
<!-- Open Graph --><meta property="og:locale" content="en_CA">
<meta property="og:type" content="article">
<meta property="og:title" content="Introducing Inquiry: A process flow in Javascript">
<meta property="og:description" content="A Javascript process for testing data and aggregating results.">
<meta property="og:url" content="https://robporter.ca/introducing-inquiry/">
<meta property="og:site_name" content="Rob Porter">
<meta property="og:image" content="https://robporter.ca/assets/img/feather-7.svg">
<link rel="canonical" href="https://robporter.ca/introducing-inquiry/">
<link href="https://robporter.ca/feed.xml" type="application/atom+xml" rel="alternate" title="Rob Porter Feed">
<!-- Handheld --><meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- CSS --><link rel="stylesheet" href="https://robporter.ca/assets/css/main.css">
<!-- JS --><script src="https://robporter.ca/assets/js/modernizr-3.3.1.custom.min.js"></script><!-- Favicons --><link rel="apple-touch-icon" href="https://robporter.ca/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://robporter.ca/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://robporter.ca/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://robporter.ca/assets/img/favicons/apple-icon-144x144.png">
<link rel="shortcut icon" type="image/png" href="https://robporter.ca/favicon.png">
<link rel="shortcut icon" href="https://robporter.ca/favicon.ico">
<!-- Background Image --><style type="text/css">body {background-image:url(https://robporter.ca/assets/img/sunset-big.jpg); background-repeat: no-repeat; background-size: cover; }</style>
<!-- Post Feature Image --><style type="text/css">.feature {background-image:url(https://robporter.ca//assets/img/vinci.jpg);}</style>
</head>
<body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"><button class="dl-trigger">Open Menu</button> <ul class="dl-menu">
<li><a href="https://robporter.ca/">Home</a></li> <!--li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://robporter.ca/assets/img/feather-7.svg" alt="Rob Porter photo" class="author-photo"> <h4>Rob Porter</h4> <p>Digital Naturalist</p> </li> <li><a href="https://robporter.ca/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://linkedin.com/in/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://instagram.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-instagram"></i> Instagram</a> </li> <li> <a href="http://github.com/rgeraldporter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://stackoverflow.com/users/325674/rob-porter" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-stack-overflow"></i> StackOverflow</a> </li> </ul><!-- /.dl-submenu --> <!--/li--> <li> <a href="#">Posts</a> <ul class="dl-submenu">
<li><a href="https://robporter.ca/posts/">All Posts</a></li> <li><a href="https://robporter.ca/tags/">All Tags</a></li> </ul>
</li> <li><a href="https://robporter.ca/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --></nav><!-- /.dl-menuwrapper --><!-- Header --><header class="header" role="banner"><div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title feature "> <h1>Introducing Inquiry: A process flow in Javascript</h1> <h4>08 Jun 2018</h4> <a class="btn zoombtn" href="https://robporter.ca/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>Like many Javascript coders, I’ve been using Javascript’s Promises for the last few years. They are a great tool for handling code in a nice, readable flow that makes asyncronous Javascript much easier to read and understand.</p> <p>However, Promise chains are vulnerable to mutation. It is quite a common practice to start a chain with a starting value, and end the chain with no notion how the resulting value was ever produced.</p> <p>For those who have taken a dive into functional programming as I have, Promises begin to look like scary “non-functional” functions that have all kinds of mutations and side-effect that are not under control. These functions become something like buying groceries at a store where you’re only told the final price, and not given a receipt with line-by-line accounting of your purchases.</p> <p>That stated, Promises are still a necessity for handling asyncronous behaviours (unless you’re willing to switch to Futures). Through some experimentation I’ve come to an API that can help with limiting the scope of Promises, while also helping give “receipts”, both from your asyncronous functions, and your syncronous ones.</p> <h2 id="inquiry">Inquiry</h2> <p>My solution has been to create a process flow API that is expressive enough for someone unfamiliar to understand what’s going on, while retaining good practices from functional programming.</p> <p>Inquiry takes a starting value (known as a “subject”), and then chains together functions that return (or resolve, in the case of Promises) either a <code class="highlighter-rouge">Pass</code> or a <code class="highlighter-rouge">Fail</code> value. These passes and fails get collected and reported at the end of the chain, to be handled however the author prefers at the end.</p> <p>An absolutely basic example looks like:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">isMoreThanOne</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span>
    <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">?</span> <span class="nx">Pass</span><span class="p">(</span><span class="s1">'Is greater than 1'</span><span class="p">)</span> <span class="p">:</span> <span class="nx">Fail</span><span class="p">(</span><span class="s1">'Is less than or equal to 1'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">isLessThanTen</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span>
    <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">?</span> <span class="nx">Pass</span><span class="p">(</span><span class="s1">'Is less than 10'</span><span class="p">)</span> <span class="p">:</span> <span class="nx">Fail</span><span class="p">(</span><span class="s1">'Is greater than or equal to 10'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">isEven</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span>
    <span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="nx">Pass</span><span class="p">(</span><span class="s1">'Is even'</span><span class="p">)</span> <span class="p">:</span> <span class="nx">Fail</span><span class="p">(</span><span class="s1">'Is odd'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">Inquiry</span><span class="p">.</span><span class="nx">subject</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">inquire</span><span class="p">(</span><span class="nx">isMoreThanOne</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">inquire</span><span class="p">(</span><span class="nx">isLessThanTen</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">inquire</span><span class="p">(</span><span class="nx">isEven</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">join</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="c1">// &gt; {subject: Just(5), pass: Pass(['Is greater than 1', 'Is less than 10']), fail: Fail(['Is odd']), iou: IOU([]), informant: _ =&gt; _};</span>
</code></pre></div></div> <p>To see how it all works, please see the documentation at: <a href="https://github.com/rgeraldporter/inquiry-monad/blob/master/README.md" target="_blank">https://github.com/rgeraldporter/inquiry-monad/blob/master/README.md</a></p> <p>The API for Inquiry has gone through many phases and experiments, and I believe it’s reaching a point of being fairly solid. I still have some work to do on improving the unit tests, and I aim to be providing interactive examples before I say it’s ready for production use.</p> <p>It is still “early days” on this project, meaning that as long as I have the version number at <code class="highlighter-rouge">0.x</code> the API is not necessary written in stone, but once I feel it is stable, I will increment it to <code class="highlighter-rouge">1.x</code>.<img src="http://robporter.ca/assets/img/feather-7.svg" style="width:33px;height:33px;display:inline;padding-left:6px"></p> <div class="entry-meta"> <br><hr>
<span class="entry-tags"><a href="https://robporter.ca/tags/#Javascript" title="Pages tagged Javascript" class="tag"><span class="term">Javascript</span></a><a href="https://robporter.ca/tags/#functional%20programming" title="Pages tagged functional programming" class="tag"><span class="term">functional programming</span></a><a href="https://robporter.ca/tags/#Node.js" title="Pages tagged Node.js" class="tag"><span class="term">Node.js</span></a><a href="https://robporter.ca/tags/#InquiryJS" title="Pages tagged InquiryJS" class="tag"><span class="term">InquiryJS</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://robporter.ca/introducing-inquiry/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=https://robporter.ca/introducing-inquiry/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://robporter.ca/introducing-inquiry/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header><!-- JS --><script src="https://robporter.ca/assets/js/jquery-1.12.0.min.js"></script><script src="https://robporter.ca/assets/js/jquery.dlmenu.min.js"></script><script src="https://robporter.ca/assets/js/jquery.goup.min.js"></script><script src="https://robporter.ca/assets/js/jquery.magnific-popup.min.js"></script><script src="https://robporter.ca/assets/js/jquery.fitvid.min.js"></script><script src="https://robporter.ca/assets/js/scripts.js"></script><!-- MathJax --><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
